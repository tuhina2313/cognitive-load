<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        #question-container {
            margin-bottom: 20px;
        }
        #options-container {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .option {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 5px;
            width: 450px;
            text-align: center;
        }
        #submit-btn {
            cursor: pointer;
            display: none;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>

<div id="question-container"></div>
<div id="options-container"></div>
<button id="submit-btn">Submit</button>

<script>
    var questions = [];
    var currentQuestionIndex = 0;
    var startTime;
    var selectedOption;

    // Function to read CSV file
    function readCSV(file, callback) {
        Papa.parse(file, {
            download: true,
            complete: function (result) {
                callback(result.data);
            }
        });
    }

    // Function to display the question
    function displayQuestion() {
        var questionContainer = document.getElementById("question-container");
        var optionsContainer = document.getElementById("options-container");
        var submitButton = document.getElementById("submit-btn");

        // Display the question
        questionContainer.textContent = questions[currentQuestionIndex].question;

        // Display the options
        optionsContainer.innerHTML = "";
        questions[currentQuestionIndex].options.forEach(function (option, index) {
            var optionDiv = document.createElement("div");
            optionDiv.className = "option";
            optionDiv.textContent = option;

            optionDiv.addEventListener("click", function () {
                // Log the selected option
                selectedOption = option;
                console.log("Selected option: " + selectedOption);

                // Remove previous selection styling
                document.querySelectorAll('.option').forEach(function (el) {
                    el.style.backgroundColor = "";
                });

                // Add new selection styling
                optionDiv.style.backgroundColor = "#e0e0e0";
            });

            optionsContainer.appendChild(optionDiv);
        });

        submitButton.addEventListener("click", function () {
            if (selectedOption) {
                var endTime = new Date();
                var elapsedTime = endTime - startTime;
                console.log("Selected option: " + selectedOption);
                console.log("Elapsed time: " + elapsedTime + " milliseconds");

                // Move to the next question
                currentQuestionIndex++;
                selectedOption = null; // Reset selected option
                if (currentQuestionIndex < questions.length) {
                    displayQuestion();
                    startTime = new Date(); // Record start time for the next question
                } else {
                    alert("End of the quiz!");
                }
            } else {
                alert("Please select an option before submitting.");
            }
        });

        submitButton.style.display = "block";
    }

    // Entry point
    readCSV("questions.csv", function (data) {
        // Assuming CSV structure: question, option1, option2, ..., correctAnswer
        for (var i = 0; i < data.length; i++) {
            var questionData = data[i];
            var question = {
                question: questionData[0],
                options: questionData.slice(1, -1),
                correctAnswer: questionData[questionData.length - 1]
            };
            questions.push(question);
        }

        startTime = new Date();
        displayQuestion();
    });
</script>

</body>
</html>
